# ********** Common Properties ****************
server.port = 8081
server.servlet.context-path = /ida/v0.1
logging.level.root=info
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=off
application.id=IDA
application.name=ID-Authentication
otprequest.received-time-allowed.in-minutes=20
authrequest.received-time-allowed.seconds=30

# *********** Otp Flooding ************
otp.request.flooding.duration=1
otp.request.flooding.max-count=3

requestdate.received.in.max.time.mins=20

# ID-Authentication Mapping json configurations
ida.mapping.json.filename=ida-mapping.json 
ida.mapping.property.source=classpath:${ida.mapping.json.filename} 


# ************* MySql Properties ************************
#javax.persistence.jdbc.driver=com.mysql.jdbc.Driver
#javax.persistence.jdbc.url=jdbc:mysql://localhost:3306/preenrollment?createDatabaseIfNotExist=true 
#javax.persistence.jdbc.user=root
#javax.persistence.jdbc.password=admin

# ************ Hibernate MySql Dialect ************
#hibernate.dialect=org.hibernate.dialect.MySQL5Dialect

# ***************** Postgres Properties ***********************
javax.persistence.jdbc.driver=org.postgresql.Driver
javax.persistence.jdbc.url=jdbc:postgresql://localhost:5432/ida_db
javax.persistence.jdbc.user=postgres
javax.persistence.jdbc.password=admin

# ************ Hibernate Postgres Dialect ************
hibernate.dialect=org.hibernate.dialect.PostgreSQL95Dialect

# *********** Hibernate Properties *************
hibernate.jdbc.lob.non_contextual_creation=true
hibernate.hbm2ddl.auto=update
hibernate.show_sql=false
hibernate.format_sql=false
hibernate.connection.charSet=utf8
hibernate.cache.use_second_level_cache=false
hibernate.cache.use_query_cache=false
hibernate.cache.use_structured_entries=false
hibernate.generate_statistics=false
spring.datasource.initialization-mode=always 

#********Demo Default properties******
demo.threshold=60
fgrmin.single.threshold=300
fgrimg.single.threshold=60
fgrmin.composite.threshold=600
irisimg.single.threshold=60
irisimg.composite.threshold=120

ida.uin.salt.modulo=1000


#**** Sample Iris Match Scores (Used to provide match score in place of SDK)****
evenuin.irisimg.left.match.value=80
evenuin.irisimg.right.match.value=50

odduin.irisimg.left.match.value=40
odduin.irisimg.right.match.value=70

evenuin.faceimg.match.value=80
odduin.faceimg.match.value=40



dob.date.time.pattern=yyyy-MM-dd

##### log.properties #####
# Required for RestUtilTest and AuditFactory test
# LOG4J configuration
log4j.rootLogger=DEBUG, Appender

log4j.appender.Appender=org.apache.log4j.RollingFileAppender
log4j.appender.Appender.file= logs
log4j.appender.Appender.filePattern=logs/id-usage-service-%d{yyyy-MM-dd-HH-mm}-%i.log
#log4j.appender.Appender.layout=org.apache.log4j.PatternLayout
#log4j.appender.Appender.layout.ConversionPattern = %d{yyyy-MM-dd HH:mm:ss.SSS} %level [%t] [%c] [%M] [%l] - %msg%n

log4j.appender.Appender.maxFileSize=1MB
log4j.appender.Appender.totalCap=10MB
#log4j.appender.Appender.maxBackupIndex=10

#####################################################################################################################
##### rest-services.properties #####
requestdate.received.in.max.time=100
#==============================================
# ************** Audit ************************
#==============================================
## Dont change this url as it is a mock url for restHelperTest class
audit.rest.uri=http://127.0.0.1:8082/auditmanager/audits
audit.rest.httpMethod=POST
audit.rest.headers.mediaType=application/json
#In seconds
audit.rest.timeout=100

#OTP_Validator
otp-validate.rest.uri=http://localhost:8080/otpmanager/otps
otp-validate.rest.httpMethod=GET
otp-validate.rest.headers.mediaType=application/json
otp-validate.rest.timeout=100


#Template Master Data
#Single language 
id-masterdata-template-service.rest.httpMethod=GET
id-masterdata-template-service.rest.headers.mediaType=application/json
id-masterdata-template-service.rest.timeout=1000
id-masterdata-template-service.rest.uri=https://integ.mosip.io/masterdata/v1.0/templates/{langcode}/{templatetypecode}

#Multi language 
id-masterdata-template-service-multilang.rest.httpMethod=GET
id-masterdata-template-service-multilang.rest.headers.mediaType=application/json
id-masterdata-template-service-multilang.rest.timeout=1000
id-masterdata-template-service-multilang.rest.uri=https://integ.mosip.io/masterdata/v1.0/templates/templatetypecodes/{code}


#=============================================
# ******** OTP Generator *********************
#=============================================
otp-generate.rest.uri=http://localhost:8080/otpmanager/otps
otp-generate.rest.httpMethod=POST
otp-generate.rest.headers.mediaType=application/json
otp-generate.rest.timeout=100


#=============================================
# ******** eKYC Mail Notification *********************
#=============================================
mail-notification.rest.uri=https://integ.mosip.io/emailnotifier/v1.0/email/send
mail-notification.rest.httpMethod=POST
mail-notification.rest.headers.mediaType=multipart/form-data
mail-notification.rest.timeout=1000
#=============================================
# ******** eKYC SMS Notification *********************
#=============================================
sms-notification.rest.uri=http://104.211.214.143:8084/notifier/sms
sms-notification.rest.httpMethod=POST
sms-notification.rest.headers.mediaType=application/json
sms-notification.rest.timeout=1000

# Language Code
mosip.errormessages.default-lang=en
mosip.primary-language=ara
mosip.secondary-language=fra

#************ E-KYC********
ekyc.auth.types.allowed=otp,bio,pin

#-------Config for UIN/VID in Internal Auth-------------
request.idtypes.allowed.internalauth=VID,UIN,USERID

# *********** eKyc *****************
ekyc.ttl.hours=24

# *********** Mail Configuration *****************
mosip.auth.mail.content.template=auth-email-content-template.txt
mosip.auth.mail.subject.template=auth-email-subject-template.txt
mosip.otp.mail.content.template=otp-email-content-template.txt
mosip.otp.mail.subject.template=otp-email-subject-template.txt

# *********** SMS Configuration *****************
mosip.auth.sms.template=auth-sms-template.txt
mosip.otp.sms.template=otp-sms-template.txt

#**************** Notification Type *************
mosip.notificationtype=SMS|EMAIL

#********* OTP Expiring Time *********
mosip.kernel.otp.expiry-time=3

#*************** Notification Date/time Format **********
notification.date.format=dd-MM-yyyy
notification.time.format=HH:mm:ss

#********** Email Properties *************
mosip.kernel.email.max-length=50
mosip.kernel.email.min-length=7
mosip.kernel.email.special-char=!#$%&'*+-/=?^_`{|}~.
mosip.kernel.email.domain.ext-min-lenght=2
mosip.kernel.email.domain.ext-max-lenght=7
mosip.kernel.email.domain.special-char=-

#*********** Phone Properties ***********
mosip.kernel.phone.max-length=15
mosip.kernel.phone.min-length=9
mosip.kernel.phone.special-char=+ -
#********* Internal Auth Type *********
internal.auth.types.allowed=demo,otp,bio-FACE,bio-Finger,bio-Iris,bio-FMR

mosip.kernel.crypto.asymmetric-algorithm-name=RSA
mosip.kernel.crypto.symmetric-algorithm-name=AES

#********* Store Private Key *********
sample.privatekey.filepath={0}\Private_key

#********* KEY SPLITTER*********
mosip.kernel.data-key-splitter=#KEY_SPLITTER#
mosip.supported-languages=eng,ara,fra

#---------------- DOB date pattern -------------------
dob.req.date.pattern=dd/MM/yyyy
dob.entity.date.pattern=yyyy/MM/dd
datetime.pattern=yyyy-MM-dd'T'HH:mm:ss.SSSXXX

#----------------------------------VID------------------------------------------
mosip.vid.validity.hours=24

#----------------------------------IDRepo Status------------------------------------------
mosip.kernel.idrepo.status.registered=ACTIVATED

#*********** Template Language Specification *****************
# Notification lanugage types - either PRIMARY or BOTH
mosip.notification.language-type=both

# Gender Type Service rest api-GET
id-masterdata-gender-service.rest.uri=https://integ.mosip.io/masterdata/v1.0/gendertypes
id-masterdata-gender-service.rest.httpMethod=GET
id-masterdata-gender-service.rest.headers.mediaType=application/json
id-masterdata-gender-service.rest.timeout=100

# Title Service rest api-GET
id-masterdata-title-service.rest.uri=https://integ.mosip.io/masterdata/v1.0/title
id-masterdata-title-service.rest.httpMethod=GET
id-masterdata-title-service.rest.headers.mediaType=application/json
id-masterdata-title-service.rest.timeout=100

#------ Static Token Configuration ---------------
static.token.enable=false

# -----------------AuthType Enable----------------------
auth.types.allowed=pin,demo,otp,bio-FID,bio-Finger,bio-Iris,bio-FMR

mosip.ida.api.ids.auth=mosip.identity.auth

#***********Certificate type************
mosip.jws.certificate.type=X.509
mosip.jws.certificate.organization=Mindtree Limited
mosip.jws.certificate.algo=RS256


#-------Mocking of License Key and MISP------------
licenseKey.735899345 ={ "mispId": "5479834598", "expiryDt": "2031-03-07T12:58:41.762Z", "status": "active" }
licenseKey.629877671 ={ "mispId": "9870862555", "expiryDt": "2031-03-07T12:58:41.762Z", "status": "active" }

licenseKey.635899234={"mispId" :"5479834983","expiryDt":"2031-03-07T12:58:41.762Z","status":"inactive"}
licenseKey.135898653={"mispId":"5479833455","expiryDt":"2019-03-07T12:58:41.762Z","status":"active"}

#-------Mocking of Policy Id------------
policy.92834787293={ "policies": { "authPolicies": [{ "authType": "otp", "mandatory": true }, { "authType": "pin", "mandatory": false }, { "authType": "bio", "authSubType": "FINGER", "mandatory": true }, { "authType": "bio", "authSubType": "IRIS", "mandatory": false }, { "authType": "bio", "authSubType": "FACE", "mandatory": false }, { "authType": "otp-request", "mandatory": false }], "allowedKycAttributes": [{ "attributeName": "UIN", "required": false, "masked": true }, { "attributeName": "fullName", "required": true }, { "attributeName": "dateOfBirth", "required": true }, { "attributeName": "gender", "required": true }, { "attributeName": "phone", "required": true }, { "attributeName": "email", "required": true }, { "attributeName": "addressLine1", "required": true }, { "attributeName": "addressLine2", "required": true }, { "attributeName": "addressLine3", "required": true }, { "attributeName": "region", "required": true }, { "attributeName": "province", "required": true }, { "attributeName": "city", "required": true }, { "attributeName": "postalCode", "required": false }, { "attributeName": "photo", "required": true }] } }
policy.9903348702934={ "policies": { "authPolicies": [ { "authType": "otp", "mandatory": false }, { "authType": "pin", "mandatory": false }, { "authType": "bio", "authSubType": "FINGER", "mandatory": true }, { "authType": "bio", "authSubType": "IRIS", "mandatory": false }, { "authType": "bio", "authSubType": "FACE", "mandatory": false } ], "allowedKycAttributes": [ { "attributeName": "UIN", "required": false, "masked": true }, { "attributeName": "fullName", "required": true }, { "attributeName": "dateOfBirth", "required": true }, { "attributeName": "gender", "required": true }, { "attributeName": "phone", "required": true }, { "attributeName": "email", "required": true }, { "attributeName": "addressLine1", "required": true }, { "attributeName": "addressLine2", "required": true }, { "attributeName": "addressLine3", "required": true }, { "attributeName": "region", "required": true }, { "attributeName": "province", "required": true }, { "attributeName": "city", "required": true }, { "attributeName": "postalCode", "required": false }, { "attributeName": "photo", "required": true } ] } }
policy.0983222={ "policies": { "authPolicies": [ { "authType": "otp", "mandatory": true }, { "authType": "pin", "mandatory": true }, { "authType": "bio", "authSubType": "FINGER", "mandatory": false }, { "authType": "bio", "authSubType": "IRIS", "mandatory": false }, { "authType": "bio", "authSubType": "FACE", "mandatory": false } ], "allowedKycAttributes": [ { "attributeName": "UIN", "required": false, "masked": true }, { "attributeName": "fullName", "required": true }, { "attributeName": "dateOfBirth", "required": true }, { "attributeName": "gender", "required": true }, { "attributeName": "phone", "required": true }, { "attributeName": "email", "required": true }, { "attributeName": "addressLine1", "required": true }, { "attributeName": "addressLine2", "required": true }, { "attributeName": "addressLine3", "required": true }, { "attributeName": "region", "required": true }, { "attributeName": "province", "required": true }, { "attributeName": "city", "required": true }, { "attributeName": "postalCode", "required": false }, { "attributeName": "photo", "required": true } ] } }
policy.0983252={ "policies": { "authPolicies": [ { "authType": "demo", "mandatory": true }, { "authType": "pin", "mandatory": false }, { "authType": "bio", "authSubType": "FINGER", "mandatory": false }, { "authType": "bio", "authSubType": "IRIS", "mandatory": false }, { "authType": "bio", "authSubType": "FACE", "mandatory": false } ], "allowedKycAttributes": [ { "attributeName": "UIN", "required": false, "masked": true }, { "attributeName": "fullName", "required": true }, { "attributeName": "dateOfBirth", "required": true }, { "attributeName": "gender", "required": true }, { "attributeName": "phone", "required": true }, { "attributeName": "email", "required": true }, { "attributeName": "addressLine1", "required": true }, { "attributeName": "addressLine2", "required": true }, { "attributeName": "addressLine3", "required": true }, { "attributeName": "region", "required": true }, { "attributeName": "province", "required": true }, { "attributeName": "city", "required": true }, { "attributeName": "postalCode", "required": false }, { "attributeName": "photo", "required": true } ] } }
policy.0983754={ "policies": { "authPolicies": [ { "authType": "demo", "mandatory": true }, { "authType": "bio", "authSubType": "FINGER", "mandatory": false }, { "authType": "bio", "authSubType": "IRIS", "mandatory": false }, { "authType": "bio", "authSubType": "FACE", "mandatory": false } ], "allowedKycAttributes": [ { "attributeName": "UIN", "required": false, "masked": true }, { "attributeName": "fullName", "required": true }, { "attributeName": "dateOfBirth", "required": true }, { "attributeName": "gender", "required": true }, { "attributeName": "phone", "required": true }, { "attributeName": "email", "required": true }, { "attributeName": "addressLine1", "required": true }, { "attributeName": "addressLine2", "required": true }, { "attributeName": "addressLine3", "required": true }, { "attributeName": "region", "required": true }, { "attributeName": "province", "required": true }, { "attributeName": "city", "required": true }, { "attributeName": "postalCode", "required": false }, { "attributeName": "photo", "required": true } ] } }
policy.0123456={ "policies": { "authPolicies": [ { "authType": "demo", "mandatory": true },{ "authType": "otp", "mandatory": true }], "allowedKycAttributes": [ { "attributeName": "UIN", "required": false, "masked": true }, { "attributeName": "fullName", "required": true }, { "attributeName": "dateOfBirth", "required": true }, { "attributeName": "gender", "required": true }, { "attributeName": "phone", "required": true }, { "attributeName": "email", "required": true }, { "attributeName": "addressLine1", "required": true }, { "attributeName": "addressLine2", "required": true }, { "attributeName": "addressLine3", "required": true }, { "attributeName": "region", "required": true }, { "attributeName": "province", "required": true }, { "attributeName": "city", "required": true }, { "attributeName": "postalCode", "required": false }, { "attributeName": "photo", "required": true } ] } }
#-------Mocking of Partner Id------------
partner.1873299273={"policyId":"92834787293","status":"active"}
partner.1873299300={"policyId":"92834787293","status":"active"}

partner.1873299776={"policyId":"9903348702934","status":"active"}
partner.1873293764={"policyId":"9903348702934","status":"inactive"}
partner.18248239994={"policyId":"","status":"active"}

#-------Mocking of MISP-Partner Mapping------------
misp.partner.mapping.5479834598.1873299273=true
misp.partner.mapping.9870862555.1873299300=false

#--------pattern for Phone and Email-------------
mosip.id.validation.identity.phone=^([6-9]{1})([0-9]{9})$
mosip.id.validation.identity.email=^[\\w-\\+]+(\\.[\\w]+)*@[\\w-]+(\\.[\\w]+)*(\\.[a-z]{2,})$

#-------Config for UIN/VID-------------
request.idtypes.allowed=VID,UIN

mosip.kernel.otp.default-length=6

ida.sign.refid=ida
ida.sign.applicationid=ida

# The MOSIP public URL passed as environment variable "mosipbox_public_url"
domain.url=dev.mosip.net
mosipbox.public.url=https://${domain.url}

##################### Dynamic Properties - this may change for different deployemnts ##############################
# Database hostname
mosip.ida.database.hostname=${domain.url}
# Database port
mosip.ida.database.port=30090
# Database user
mosip.ida.database.user=idauser
# Database password
mosip.ida.database.password=mosip123
# Kernel auth client ID for IDA
mosip.ida.auth.clientId=mosip-ida-client
# Kernel auth secret key for IDA
mosip.ida.auth.secretKey=abc123
# Kernel auth application ID for IDA
mosip.ida.auth.appId=ida


######################## Spring and Hibernate Configurations ####################
# ***************** Postgres Properties ***********************
javax.persistence.jdbc.driverClassName=org.postgresql.Driver
javax.persistence.jdbc.driver=org.postgresql.Driver
javax.persistence.jdbc.url=jdbc:postgresql://${mosip.ida.database.hostname}:${mosip.ida.database.port}/mosip_ida
javax.persistence.jdbc.user=${mosip.ida.database.user}
javax.persistence.jdbc.username=${mosip.ida.database.user}
javax.persistence.jdbc.password=${mosip.ida.database.password}
javax.persistence.jdbc.schema=ida
javax.persistence.jdbc.uinHashTable=uin_hash_salt
javax.persistence.jdbc.uinEncryptTable=uin_encrypt_salt


hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

log4j.logger.org.hibernate=warn
ida-auth-partner-id=mpartner-default-auth
partner.reference.id=PARTNER
# Reference ID used for crypto manager in internal authentication (for request body)
internal.reference.id=INTERNAL
# Reference ID used for crypto manager in authentication for biometrics
# TO DO: Value to be Changed to IDA-BIO
partner.biometric.reference.id=IDA-FIR
# Reference ID used for crypto manager in internal authentication for biometrics
internal.biometric.reference.id=INTERNAL

# Reference ID for Identity Cache data encryption
identity-cache.reference.id=IDENTITY_CACHE
# Application id for signing key
mosip.sign.applicationid=${application.id}
# Reference id for signing key
mosip.sign.refid=SIGN

# Kernel Symmetric Key decryption bytes count for AAD
ida.aad.lastbytes.num=16
# Kernel Symmetric Key decryption bytes count for Salt
ida.salt.lastbytes.num=12

# Request timeout used across all REST API calls in IDA
mosip.ida.request.timeout.secs=10
# Common JSON media type used across all REST API calls in IDA
mosip.ida.request.mediaType=application/json

#*** ID-Authentication Mapping json configurations ***
# IDA Mapping JSON file name
# IDA Mapping JSON file URI
mosip.ida.mapping.json-urimosip.ida.mapping.json-uri=https://dev.mosip.net/config/id-authentication/mz/develop/identity-mapping.json

#--------------------------Bio SDK Integration - Bio extractor Service ----------------------------------------#
mosip.biosdk.default.host=http://13.233.66.241
mosip.biosdk.default.service.url=${mosip.biosdk.default.host}/biosdk-service

#--------------------------Demo SDK Integration ----------------------------------------#
# demographic api instance class name
mosip.demographic.sdk.api.classname=io.mosip.demosdk.client.impl.spec_1_0.Client_V_1_0

# normalizer api instance class name
mosip.normalizer.sdk.api.classname=io.mosip.demosdk.client.impl.spec_1_0.Normalizer_V_1_0

#Get Identity Data for RID (with type specified as query param) - Used in Internal Auth based on User ID
rid-uin.rest.uri=${mosipbox.public.url}/idrepository/v1/identity/idvid/{rid}?type={type}
rid-uin.rest.httpMethod=GET
rid-uin.rest.headers.mediaType=${mosip.ida.request.mediaType}
rid-uin.rest.timeout=${mosip.ida.request.timeout.secs}

#Get Identity Data for RID (without type specified) - Used in Internal Auth based on User ID
rid-uin-auth.rest.uri=${mosipbox.public.url}/idrepository/v1/identity/idvid/{rid}
rid-uin-auth.rest.httpMethod=GET
rid-uin-auth.rest.headers.mediaType=${mosip.ida.request.mediaType}
rid-uin-auth.rest.timeout=${mosip.ida.request.timeout.secs}

#Auth token generation and validation URLs
auth-token-generator.rest.uri=${mosipbox.public.url}/v1/authmanager/authenticate/clientidsecretkey
auth-token-validator.rest.uri=${mosipbox.public.url}/v1/authmanager/authorize/validateToken
auth-token-generator.rest.clientId=${mosip.ida.auth.clientId}
auth-token-generator.rest.secretKey=${mosip.ida.auth.secretKey}
auth-token-generator.rest.appId=${mosip.ida.auth.appId}

# Partner service API to validate MISP Lisence Key - Partner ID - Partner API Key combination
id-pmp-service.rest.uri=${mosipbox.public.url}/v1/partnermanager/partners/{partner_id}/apikey/{partner_api_key}/misp/{misp_license_key}/validate?needPartnerCert={need_partner_cert}
id-pmp-service.rest.httpMethod=GET
id-pmp-service.rest.headers.mediaType=${mosip.ida.request.mediaType}
id-pmp-service.rest.timeout=${mosip.ida.request.timeout.secs}

# Data Share API configurations - used to download data from data share URL provided in credential issueance event
data-share-get.rest.uri=dummy_url_to_be_replaced_in_runtime
data-share-get.rest.httpMethod=GET
data-share-get.rest.headers.mediaType=application/octet-stream
data-share-get.rest.timeout=100
data-share-get-decrypt-ref-id=${ida-auth-partner-id}

# Credential Request API to get Request IDs for the given status, pageStart and page
cred-request-service-get-request-ids.pageSize=10
cred-request-service-get-request-ids.statusCode=ISSUED
ida-max-credential-pull-window-days=2
cred-request-service-get-request-ids.rest.uri=${mosipbox.public.url}/v1/credentialrequest/getRequestIds?direction=ASC&orderBy=updateDateTime&pageNumber={pageNumber}&pageSize=${cred-request-service-get-request-ids.pageSize}&statusCode=${cred-request-service-get-request-ids.statusCode}&effectivedtimes={effectivedtimes}
cred-request-service-get-request-ids.rest.httpMethod=GET
cred-request-service-get-request-ids.rest.headers.mediaType=${mosip.ida.request.mediaType}
cred-request-service-get-request-ids.rest.timeout=${mosip.ida.request.timeout.secs}

# Credential Request API to get Request IDs for the given status, pageStart and page
cred-request-service-retrigger-cred-issuance.rest.uri=${mosipbox.public.url}/v1/credentialrequest/retrigger/{requestId}
cred-request-service-retrigger-cred-issuance.rest.httpMethod=PUT
cred-request-service-retrigger-cred-issuance.rest.headers.mediaType=${mosip.ida.request.mediaType}
cred-request-service-retrigger-cred-issuance.rest.timeout=${mosip.ida.request.timeout.secs}

#-----Websub configurations------
# Secret for auth type status update callback
ida-websub-authtype-callback-secret=Kslk30SNF2AChs2
# Secret for credtial issueance callback
ida-websub-credential-issue-callback-secret=Kslk30SNF2AChs2
# Secret for credtial issueance callback
ida-websub-partner-service-callback-secret=Kslk30SNF2AChs2
# Secret for partner CA certification upload callback
ida-websub-ca-certificate-callback-secret=Kslk30SNF2AChs2
# Secret for partner CA certification upload callback
ida-websub-hotlist-callback-secret=Kslk30SNF2AChs2
ida-websub-masterdata-templates-callback-secret=Kslk30SNF2AChs2
ida-websub-masterdata-titles-callback-secret=Kslk30SNF2AChs2
application.base.url=${mosipbox.public.url}
# Callback url for auth type status update event notification
ida-websub-auth-type-callback-url=${application.base.url}/idauthentication/v1/internal/callback/authTypeCallback/{partnerId}
# Callback url for credential issueance event notification, including id remove/deactivate/activate events
ida-websub-credential-issue-callback-url=${application.base.url}/idauthentication/v1/internal/callback/idchange/{eventType}/{partnerId}
# Callback url for MISP/Partner change notification events
ida-websub-partner-service-callback-url=${application.base.url}${server.servlet.context-path}/callback/partnermanagement/{eventType}
# Callback url for partner CA certification upload event
ida-websub-ca-cert-callback-url=${application.base.url}${server.servlet.context-path}/callback/partnermanagement/ca_certificate
# Callback url for hotlist event
ida-websub-hotlist-callback-url=${application.base.url}${server.servlet.context-path}/callback/hotlist
ida-websub-masterdata-templates-callback-url=${application.base.url}${server.servlet.context-path}/callback/masterdata/templates
ida-websub-masterdata-titles-callback-url=${application.base.url}${server.servlet.context-path}/callback/masterdata/titles

#Delay (in milliseconds) for subscription on application startup to avoid failure during intent verification by hub.
subscriptions-delay-on-startup_millisecs=1000
#Delay (in milliseconds) after initial topic subscriptions (after subscriptions-delay-on-startup_millisecs) to invoke retriggering of missing credential issuances.
delay-to-pull-missing-credential-after-topic-subscription_millisecs=1000

# The time interval in seconds to schedule subscription of topics which is done as a
# work-around for the bug: MOSIP-9496. By default the
# this property value is set to 0 that disables this workaround.
# To enable the resubscrition scheduling, this property should be assigned with a positive
# number like 1 * 60 * 60 = 3600 for one hour
ida-websub-resubscription-delay-secs=43200

#------ Web sub Event Topis used in IDA  ---
# Topic for Auth Type Status Update Event
ida-topic-auth-type-status-updated=${ida-auth-partner-id}/AUTH_TYPE_STATUS_UPDATE
# Topic for Credential Issueance Event (for UIN/VID create/update events)
ida-topic-credential-issued=${ida-auth-partner-id}/CREDENTIAL_ISSUED
# Topic for ID Remove Event (UIN blocked / VID revoked events)
ida-topic-remove-id=${ida-auth-partner-id}/REMOVE_ID
# Topic for ID Deactivate Event (UIN/VID deactivate events)
ida-topic-deactivate-id=${ida-auth-partner-id}/DEACTIVATE_ID
# Topic for ID Activate Event (UIN/VID activate events)
ida-topic-activate-id=${ida-auth-partner-id}/ACTIVATE_ID
# Topic for Fraud analysis Event
ida-topic-fraud-analysis=IDA_FRAUD_ANALYTICS

# Topic for MISP license generated event
ida-topic-pmp-misp-license-generated=MISP_LICENSE_GENERATED
# Topic for MISP update event
ida-topic-pmp-misp-updated=MISP_UPDATED
ida-topic-pmp-misp-license-updated=MISP_LICENSE_UPDATED
# Topic for API key approved event
ida-topic-pmp-partner-api-key-approved=APIKEY_APPROVED
# Topic for Partner update event
ida-topic-pmp-partner-updated=PARTNER_UPDATED
# Topic for Partner API Key update event
ida-topic-pmp-partner-api-key-updated=APIKEY_UPDATED
# Topic for Policy update event
ida-topic-pmp-policy-updated=POLICY_UPDATED
# Topic for Partner CA Certificate Upload event
ida-topic-pmp-ca-certificate-uploaded=CA_CERTIFICATE_UPLOADED

# Topic for Hotlisting event
ida-topic-hotlist=MOSIP_HOTLIST
ida-topic-credential-status-update=CREDENTIAL_STATUS_UPDATE
ida-topic-auth-type-status-update-acknowledge=AUTH_TYPE_STATUS_UPDATE_ACK
ida-topic-auth-transaction-status=AUTHENTICATION_TRANSACTION_STATUS

ida-topic-masterdata-templates=masterdata/idauthentication_templates
ida-topic-masterdata-titles=masterdata/titles
#-----------------------
authrequest.received-time-allowed.minutes=30
# Configuration for +/- time period adjustment in minutes for the request time validation, so that
# The requests originating from a system that is not in time-sync will be accepted for the time period
authrequest.received-time-adjustment.minutes=5

# Language Code
ida.errormessages.default-lang=en
mosip.ida.internal.hotlist.idtypes.allowed=UIN,VID,PARTNER_ID,DEVICE


#---------------- IDA services request time date pattern -------------------
#Example allowed date time formats: "2020-10-23T12:21:38.660Z" , 2019-03-28T10:01:57.086+05:30
datetime.pattern=yyyy-MM-dd'T'HH:mm:ss.SSSXXX
# Below timestap is for timestamps in biometric data and digital id. If timestamp with this format is present it will try to use previous datetime.pattern as fallback
# Example allowed date time formats: "2020-10-23T12:21:38Z" , 2019-03-28T10:01:57+05:30
biometrics.datetime.pattern=yyyy-MM-dd'T'HH:mm:ssXXX

#------------Request IDs---------------------
# The request IDs used in IDA REST APIs
ida.api.id.auth=mosip.identity.auth
ida.api.id.kyc=mosip.identity.kyc
ida.api.id.otp=mosip.identity.otp
ida.api.id.staticpin=mosip.identity.staticpin
ida.api.id.vid=mosip.identity.vid
ida.api.id.internal=mosip.identity.auth.internal
ida.api.id.auth.transactions=mosip.identity.authtransactions.read
ida.api.id.otp.internal=mosip.identity.otp.internal

#------------Request Versions---------------------
# The request versions used in IDA REST APIs
ida.api.version.auth=1.0
ida.api.version.kyc=1.0
ida.api.version.otp=1.0
ida.api.version.staticpin=1.0
ida.api.version.vid=1.0
ida.api.version.internal=1.0
ida.api.version.auth.transactions=1.0
ida.api.version.otp.internal=1.0
ida-zero-knowledge-encrypted-credential-attributes=individualBiometrics,fullName,dateOfBirth,phone,email,postalCode
mosip.ida.auth.trust-validation-required=false

mosip.ida.kyc.trust-validation-required=false

mosip.ida.otp.trust-validation-required=false

mosip.ida.internal.thumbprint-validation-required=false
mosip.ida.internal.trust-validation-required=false


#-------Kernel Retry Configurations----------------
# The retry limit excluding the first attempt before attempting for retries. Default is set to 5.
kernel.retry.attempts.limit=5
# The initial interval to be used for exponential backoff in milli seconds. If the exponential backoff is disabled by setting 'kernel.retry.exponential.backoff.multiplier' value as 1, this initial interval will be used as the fixed backoff interval for every retries. Default value is 200 millisecs
kernel.retry.exponential.backoff.initial.interval.millisecs=100
# The multiplier for exponential backoff intreval. A double value greater than or equal to 1. Setting to 1 will make it to fixed backoff, more than 1 will apply exponential backoff. Default is 1.0 (fixed backoff). For exponential backoff the suggested value is 1.5 or 2. The next backoff interval is calculated with the formula: NextBackOffInterval = initialInterval * Math.pow(multiplier, retryCount)
kernel.retry.exponential.backoff.multiplier=1.5
kernel.retry.exponential.backoff.max.interval.millisecs=1000
# Whether to traverse to the root cause exception from the exception thrown and use the same root cause to decide whether to retry or not. Default is true.
kernel.retry.traverse.root.cause.enabled=false
#Comma separated List of fully qualified Exceptions which are retryable (inclusion list). Their subclasses will also be considered in the evaluation.
kernel.retry.retryable.exceptions=io.mosip.authentication.core.exception.IdAuthRetryException,io.mosip.authentication.core.exception.IdAuthenticationBaseException
#Comma separated List of fully qualified Exceptions which are not-retryable (exclusion list). Their subclasses will also be considered in the evaluation.
kernel.retry.nonretryable.exceptions=

#-------Credential Store batch and retry configurations---
# To disable automatic job launch in startup, setting to false.
spring.batch.job.enabled=false

# The chunk size of items to be processed in spring batch. This value also assigned to the thread count, and hence all the items are processed in parellel asynchronusly.
ida.batch.credential.store.chunk.size=5
ida.batch.credential.store.job.delay=100

# The retry limit excluding the first attempt before attempting for retries
ida.credential.store.retry.max.limit=10
ida.credential.store.retry.backoff.interval.millisecs=100
# The multiplier for exponential backoff intreval. A double value greater than or equal to 1. Setting to 1 will make it to fixed backoff, more than 1 will apply exponential backoff. Default is 1.0 (fixed backoff). For exponential backoff the suggested value is 1.5 or 2. The next backoff interval is calculated with the formula: NextBackOffInterval = initialInterval * Math.pow(multiplier, retryCount)
ida.credential.store.retry.backoff.exponential.multiplier=1.5
ida.credential.store.retry.backoff.exponential.max.interval.millisecs=120000



############## Configurations needed for dependent libraries #####
#-----------------------------------Softhsm --------------------------------------
mosip.kernel.keymanager.certificate.default.common-name=www.mosip.io
mosip.kernel.keymanager.hsm.config-path=
mosip.kernel.keymanager.hsm.keystore-type=OFFLINE
mosip.kernel.keymanager.hsm.keystore-pass=


#----------Security Properties - used in Internal Authentication Services by default Kernel Auth Adapter------------------
# CSRF switch
mosip.security.csrf-enable=false

# CORS switch
mosip.security.cors-enable=false

# Comma separated allowed origins
mosip.security.origins=localhost:8080

# Secure cookie switch
mosip.security.secure-cookie=false

#------------- Key-manager properties -------------------------
# ROOT key identifier
mosip.root.key.applicationid=ROOT

# Certificate signing algorithm
mosip.kernel.certificate.sign.algorithm=SHA256withRSA

# Default certificate params
mosip.kernel.keymanager.certificate.default.organizational-unit=MOSIP-TECH-CENTER
mosip.kernel.keymanager.certificate.default.organization=IITB
mosip.kernel.keymanager.certificate.default.location=BANGALORE
mosip.kernel.keymanager.certificate.default.state=KA
mosip.kernel.keymanager.certificate.default.country=IN

# Zero Knowledge Master & Public Key identifier.
mosip.kernel.zkcrypto.masterkey.application.id=${application.id}
mosip.kernel.zkcrypto.masterkey.reference.id=${identity-cache.reference.id}
mosip.kernel.zkcrypto.publickey.application.id=${application.id}
mosip.kernel.zkcrypto.publickey.reference.id=CRED_SERVICE
mosip.kernel.zkcrypto.wrap.algorithm-name=AES/ECB/NoPadding
mosip.kernel.zkcrypto.derive.encrypt.algorithm-name=AES/ECB/PKCS5Padding

# Application Id for PMS master key.
mosip.kernel.partner.sign.masterkey.application.id=PMS


#---------------------------------kernel Salt Generator---------------------------------------------------#
mosip.kernel.salt-generator.db.key-alias=javax.persistence.jdbc
mosip.kernel.salt-generator.schemaName=${javax.persistence.jdbc.schema}
#----------------------------------------------------------------------------------------------------------#

#--------------------------------TokenId generator---------------------------------------------------#
mosip.kernel.tokenid.uin.salt=zHuDEAbmbxiUbUShgy6pwUhKh9DE0EZn9kQDKPPKbWscGajMwf
mosip.kernel.tokenid.partnercode.salt=yS8w5Wb6vhIKdf1msi4LYTJks7mqkbmITk2O63Iq8h0bkRlD0d
#----------------------------------------------------------------------------------------------------#

# Partner Management Service allowed partner domains
mosip.kernel.partner.allowed.domains=AUTH,DEVICE,FTM

######################### IDA Key Generator configurations #############################
keymanager.persistence.jdbc.driver=org.postgresql.Driver
keymanager_database_url=jdbc:postgresql://${mosip.ida.database.hostname}:${mosip.ida.database.port}/mosip_ida
keymanager_database_username=${mosip.ida.database.user}
keymanager_database_password=abc123
mosip.kernel.keymanager.autogen.appids.list=ROOT,${application.id},${mosip.sign.applicationid}:${mosip.sign.refid},${application.id}:${mosip.kernel.zkcrypto.masterkey.reference.id}
mosip.kernel.keymanager.autogen.basekeys.list=${application.id}:${internal.reference.id},${application.id}:${partner.reference.id},${application.id}:${partner.biometric.reference.id},${application.id}:${mosip.kernel.zkcrypto.publickey.reference.id},${application.id}:${ida-auth-partner-id}
zkcrypto.random.key.generate.count=0

keymanager.persistence.jdbc.schema=ida
mosip.location.profile.attribute.name=locationHierarchyForProfiling
mosip.preferred.language.attribute.name=preferredLanguage
ida-topic-auth-anonymous-profile=ANONYMOUS_PROFILE
ida.mosip.external.auth.filter.classes.in.execution.order=io.mosip.authentication.hotlistfilter.impl.PartnerIdHotlistFilterImpl,io.mosip.authentication.hotlistfilter.impl.IndividualIdHotlistFilterImpl,io.mosip.authentication.hotlistfilter.impl.DeviceProviderHotlistFilterImpl,io.mosip.authentication.hotlistfilter.impl.DeviceHotlistFilterImpl,io.mosip.authentication.childauthfilter.impl.ChildAuthFilterImpl,io.mosip.authentication.authtypelockfilter.impl.AuthTypeLockFilterImpl
#Auth Filters for internal auth
ida.mosip.internal.auth.filter.classes.in.execution.order=

# Child Auth Filter configurations
ida.child-auth-filter.child.max.age=5
ida.child-auth-filter.factors.denied=otp,bio

mosip.iam.adapter.clientid=mosip-ida-client
mosip.iam.adapter.clientsecret=abc123
mosip.iam.adapter.appid=ida
mosip.authmanager.base-url=https://dev.mosip.net/v1/authmanager
mosip.authmanager.client-token-endpoint=${mosip.authmanager.base-url}/authenticate/clientidsecretkey
mosip.ida.allowed.enviromemnts=Staging,Developer,Pre-Production,Production

mosip.ida.allowed.domain.uris=${mosipbox.public.url}
mosip.hotlist.cleanup-schedule.fixed-delay-in-hours=24
mosip.role.idauth.postotp=RESIDENT
mosip.role.idauth.postauth=REGISTRATION_PROCESSOR,REGISTRATION_ADMIN,REGISTRATION_OFFICER,REGISTRATION_SUPERVISOR,RESIDENT
mosip.role.idauth.postverifyidentity=REGISTRATION_PROCESSOR,REGISTRATION_ADMIN,REGISTRATION_OFFICER,REGISTRATION_SUPERVISOR,RESIDENT
mosip.role.idauth.getauthtransactionsindividualid=RESIDENT

mosipbox_public_url=https://dev.mosip.net
# Value used in IdObjectReferenceValidator when location is not available
mosip.kernel.idobjectvalidator.masterdata.locations.locationNotAvailable=NA
mosip.kernel.xsdstorage-uri=https://dev.mosip.net/config/id-authentication/mz/develop/
# Cbeff XSD file name in config server
mosip.kernel.xsdfile=mosip-cbeff.xsd
spring.application.name=id-authentication,id-authentication-internal
#----------------------------- Applicant Type --------------------------------------------------
mosip.kernel.applicant.type.age.limit = 5
mosip.kernel.applicantType.mvel.file=applicanttype.mvel
mosip.kernel.config.server.file.storage.uri=${spring.cloud.config.uri}/${spring.application.name}/${spring.profiles.active}/${spring.cloud.config.label}/
#----------------------------- Static PIN --------------------------------------------------
mosip.kernel.pin.length=6

#-----------------------------TspId -----------------------------------------------
#length of the Tsp id
mosip.kernel.tspid.length=4

#-----------------------------partnerId -----------------------------------------------
#length of the partner id
mosip.kernel.partnerid.length=4

#-----------------------------TOKEN-ID Properties---------------------------------
#length of the token id
mosip.kernel.tokenid.length=36
mosip.kernel.vid.length=16

mosip.kernel.vid.length.sequence-limit=3

mosip.kernel.vid.length.repeating-block-limit=2

mosip.kernel.vid.length.repeating-limit=2

mosip.kernel.vid.not-start-with=0,1
mosip.kernel.vid.restricted-numbers=786,666

mosip.kernel.uin.length=10
#minimum threshold of unused uin
mosip.kernel.uin.min-unused-threshold=200000
#number of uins to generate
mosip.kernel.uin.uins-to-generate=500000
#restricted numbers for uin
mosip.kernel.uin.restricted-numbers=786,666

mosip.kernel.uin.length.sequence-limit=3

mosip.kernel.uin.length.repeating-block-limit=2

mosip.kernel.uin.length.repeating-limit=2

mosip.kernel.uin.length.reverse-digits-limit=5

mosip.kernel.uin.length.digits-limit=5

mosip.kernel.uin.not-start-with=0,1

mosip.kernel.uin.length.conjugative-even-digits-limit=3

auth.server.validate.url=${mosipbox.public.url}/v1/authmanager/authorize/admin/validateToken
mosip.keycloak.base-url=http://keycloak
mosip.keycloak.issuerUrl=${mosipbox.public.url}/keycloak/auth/realms/mosip
auth-token-generator.rest.issuerUrl=${mosip.keycloak.issuerUrl}
mosip.kernel.keygenerator.asymmetric-key-length=2048
#Symmetric algorithm key length
mosip.kernel.keygenerator.symmetric-key-length=256
#Keygenerator symmetric algorithm name
mosip.kernel.keygenerator.symmetric-algorithm-name=AES
# keygenerator asymmetric algorithm name
mosip.kernel.keygenerator.asymmetric-algorithm-name=RSA
#GCM tag length
mosip.kernel.crypto.gcm-tag-length=128
#Hash algo name
mosip.kernel.crypto.hash-algorithm-name=PBKDF2WithHmacSHA512
#Symmtric key length used in hash
mosip.kernel.crypto.hash-symmetric-key-length=256
#No of iterations in hash
mosip.kernel.crypto.hash-iteration=100000
#Sign algo name
mosip.kernel.crypto.sign-algorithm-name=RS256
mosip.auth.adapter.impl.basepackage=io.mosip.kernel.auth.defaultadapter
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.directory=/dev
server.tomcat.accesslog.prefix=stdout
server.tomcat.accesslog.buffered=false
server.tomcat.accesslog.suffix=
server.tomcat.accesslog.file-date-format=
server.tomcat.accesslog.pattern={"@timestamp":"%{yyyy-MM-dd'T'HH:mm:ss.SSS'Z'}t","level":"ACCESS","level_value":70000,"traceId":"%{X-B3-TraceId}i","statusCode":%s,"req.requestURI":"%U","bytesSent":%b,"timeTaken":%T,"appName":"${spring.application.name}"}
server.tomcat.accesslog.className=io.mosip.kernel.core.logger.config.SleuthValve

#---------------- Web Sub properties -------------------------
# The base URL of dmz ingress used to point to websub service
dmz.ingress.base.url=${mosipbox.public.url}
# Websub base url
websub.base.url=${dmz.ingress.base.url}
# Websub URL for Topic Subscriptions
websub.hub.url=${websub.base.url}/websub/hub
# Websub URL for Publishing/registering topics
websub.publish.url=${websub.base.url}/websub/publish
mosip.mandatory-languages=eng
mosip.optional-languages=ara,fra
mosip.min-languages.count=2
mosip.max-languages.count=3
mosip.recommended.centers.locCode=5
mosip.default.template-languages=eng,ara

#Config key to pick the preferred language for communicating to the Resident
mosip.default.user-preferred-language-attribute=preferredLang

mosip.kernel.auth.appids.realm.map={prereg:'preregistration',ida:'mosip',registrationclient:'mosip',regproc:'mosip',partner:'mosip',resident:'mosip',admin:'mosip',crereq:'mosip',creser:'mosip',datsha:'mosip'}
# URL to get new Auth Token from OIDC provider & to do online validation of auth token with OIDC provider.
auth.server.admin.issuer.uri=${mosipbox.public.url}/keycloak/auth/realms/

openapi.info.title=Id Authentication Internal Service
openapi.info.description=Id Authentication Internal Service
openapi.info.version=1.0
openapi.info.license.name=Mosip
openapi.info.license.url=https://docs.mosip.io/platform/license
openapi.service.servers[0].url=${mosipbox.public.url}${server.servlet.context-path}
openapi.service.servers[0].description=Id Authentication Internal Service
openapi.group.name=${openapi.info.title}
openapi.group.paths[0]=/**
ida-websub-idchage-callback-url=${mosipbox.public.url}${server.servlet.context-path}/callback/idchange/{eventType}/${ida-auth-partner-id}
ida-websub-idchange-credential-issued-callback-relative-url=${server.servlet.context-path}/callback/idchange/credential_issued/${ida-auth-partner-id}
ida-websub-idchange-remove-id-callback-relative-url=${server.servlet.context-path}/callback/idchange/remove_id/${ida-auth-partner-id}
ida-websub-idchange-deactivate-id-callback-relative-url=${server.servlet.context-path}/callback/idchange/deactivate_id/${ida-auth-partner-id}
ida-websub-idchange-activate-id-callback-relative-url=${server.servlet.context-path}/callback/idchange/activate_id/${ida-auth-partner-id}
ida-websub-hotlist-callback-relative-url=${server.servlet.context-path}/callback/hotlist
ida-websub-auth-type-callback-relative-url=${server.servlet.context-path}/callback/authTypeCallback/${ida-auth-partner-id}
ida-websub-masterdata-templates-callback-relative-url=
ida-websub-masterdata-titles-callback-relative-url=
ida-websub-ca-cert-callback-relative-url=


# Callback url for MISP/Partner change notification events
ida-websub-partner-service-apikey-approved-callback-relative-url=${server.servlet.context-path}/callback/partnermanagement/apikey_approved
ida-websub-partner-service-partner-updated-callback-relative-url=${server.servlet.context-path}/callback/partnermanagement/partner_updated
ida-websub-partner-service-policy-updated-callback-relative-url=${server.servlet.context-path}/callback/partnermanagement/policy_updated
ida-websub-partner-service-partner-api-key-updated-callback-relative-url=${server.servlet.context-path}/callback/partnermanagement/partner_api_key_updated
ida-websub-partner-service-misp-license-generated-callback-relative-url=${server.servlet.context-path}/callback/partnermanagement/misp_license_generated
ida-websub-partner-service-misp-license-updated-callback-relative-url=${server.servlet.context-path}/callback/partnermanagement/misp_license_updated
